<include file="public@header"/>
</head>
<body>
<div class="wrap js-check-wrap wpx">

    <form class="form-horizontal js-ajax-form margin-top-20" id="set_game_config_form" role="form" action="" method="POST">
            <div class="tabbable">
                <div class="tab-content">
                    <div class="tab-pane active" id="A">

                        <div class="form-group">
                            <label for="input-site-name" class="col-sm-2 p_control-label">
                                <span class="form-required">*</span>接口名称: 
                            </label>
                            <div class="col-md-9 col-sm-9">
                                <input type="text" class="form-control " name="interface_name" id="interface_name" value="{$data.name}" placeholder="">
                                <p class="help-block p_help"></p>
                            </div>
                            <br>
                        </div>

                        <div class="form-group">
                            <label for="input-site-name" class="col-sm-2 p_control-label">
                                <span class="form-required">*</span>标签: 
                            </label>
                            <div class="col-md-9 col-sm-9">
                                <input type="text" class="form-control " name="interface_tag" id="interface_tag" value="{$data.tag}" placeholder="">
                                <p class="help-block p_help"></p>
                            </div>
                            <br>
                        </div>

                        <div class="form-group">
                            <label for="input-site-name" class="col-sm-2 p_control-label">
                                <span class="form-required">*</span>标识: 
                            </label>
                            <div class="col-md-9 col-sm-9">
                                <input type="text" class="form-control " name="interface_unid" id="interface_unid" value="{$data.unid}" placeholder="">
                                <p class="help-block p_help"></p>
                            </div>
                            <br>
                        </div>

                        <div class="form-group">
                            <label for="input-site-name" class="col-sm-2 p_control-label">
                                <span class="form-required">*</span>登录地址: 
                            </label>
                            <div class="col-md-9 col-sm-9">
                                <input type="text" class="form-control " name="interface_login_url" id="interface_login_url" value="{$data.login_url}" placeholder="">
                                <p class="help-block p_help"></p>
                            </div>
                            <br>
                        </div>

                        <div class="form-group">
                            <label for="input-site-name" class="col-sm-2 p_control-label">
                                <span class="form-required">*</span>充值地址: 
                            </label>
                            <div class="col-md-9 col-sm-9">
                                <input type="text" class="form-control " name="interface_pay_url" id="interface_pay_url" value="{$data.pay_url}" placeholder="">
                                <p class="help-block p_help"></p>
                            </div>
                            <br>
                        </div>
                        
                        <div class="form-group">
                            <label for="input-site-name" class="col-sm-2 p_control-label">
                                <span class="form-required">*</span>角色地址: 
                            </label>
                            <div class="col-md-9 col-sm-9">
                                <input type="text" class="form-control " name="interface_role_url" id="interface_role_url" value="{$data.role_url}" placeholder="">
                                <p class="help-block p_help"></p>
                            </div>
                            <br>
                        </div>

                        <div class="form-group">
                            <label for="input-site-name" class="col-sm-2 p_control-label">
                                <span class="form-required">*</span>登录Key: 
                            </label>
                            <div class="col-md-9 col-sm-9">
                                <input type="text" class="form-control " name="interface_login_key" id="interface_login_key" value="{$data.login_key}" placeholder="">
                                <p class="help-block p_help"></p>
                            </div>
                            <br>
                        </div>

                        <div class="form-group">
                            <label for="input-site-name" class="col-sm-2 p_control-label">
                                <span class="form-required">*</span>充值Key: 
                            </label>
                            <div class="col-md-9 col-sm-9">
                                <input type="text" class="form-control " name="interface_pay_key" id="interface_pay_key" value="{$data.pay_key}" placeholder="">
                                <p class="help-block p_help"></p>
                            </div>
                            <br>
                        </div>

                        <div class="form-group">
                            <label for="input-site-name" class="col-sm-2 p_control-label">
                                备注: 
                            </label>
                            <div class="col-md-9 col-sm-9">
                                <!-- <input type="text" class="form-control " name="interface_remark" id="interface_remark" value="{$data.interface_remark}" placeholder="">
                                <p class="help-block p_help"></p> -->
                                <textarea maxlength="1000" id="content" style="height: 100px;" name="interface_remark" class="form-control">{$data.remark}</textarea>
                                    <p id="text_count_p"><span style="color: #999" id="aaa"></span></p>
                            </div>
                            <br>
                        </div>

                        <input type="hidden" name="game_id" value="{$data.game_id}">

                        <div class="form-group">
                            <div class="col-sm-offset-1 col-sm-5 buts">
                                <!-- <button type="submit" class="btn btn-primary js-ajax-submit save-btn ml9" data-refresh="1">
                                    {:lang('SAVE')}
                                </button> -->
                                <a href="javascript:;" class="btn btn-primary submit_save onfirem">确定</a>
                                <!-- <a class="btn btn-default return-btn" href="javascript:history.back(-1);">返回</a> -->
                                <a href="javascript:;" class="btn btn-default return-btn close_layer qx">取消</a>

                                <!-- <button class="btn btn-default return-btn close_layer qx" href="javascript:;">取消</button> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </form>

</div>
<script type="text/javascript" src="__STATIC__/js/admin.js"></script>
<script type="text/javascript" src="__STATIC__/js/statistical_word_number.js"></script>
<script>
    $(function () {
        // startMonitor('content', 'aaa',1000);
    })
    $(".submit_save").click(function(){
        var params = jQuery("#set_game_config_form").serialize();
        params = decodeURIComponent(params,true);
        // console.log(params.marking);
        // return false;
        var flag = 1;
        var interface_name = $('input[name="interface_name"]').val();
        var interface_tag = $('input[name="interface_tag"]').val();
        var interface_unid = $('input[name="interface_unid"]').val();
        var interface_login_url = $('input[name="interface_login_url"]').val();
        var interface_pay_url = $('input[name="interface_pay_url"]').val();
        var interface_role_url = $('input[name="interface_role_url"]').val();
        var interface_login_key = $('input[name="interface_login_key"]').val();
        var interface_pay_key = $('input[name="interface_pay_key"]').val();
        // var interface_remark = $('input[name="interface_remark"]').val();
        var access_key = $('input[name="access_key"]').val();
        if(interface_name.length == 0 || interface_tag.length == 0 || interface_unid.length == 0 || interface_login_url.length == 0 || interface_pay_url.length == 0 || interface_role_url.length == 0 || interface_login_key.length == 0 || interface_pay_key.length == 0){
            layer.msg("缺少必填参数!")
            return false;
        }
        
        $.ajax({
            url:"{:url('setyyGameInterfaceInfo')}",
            type:'post',
            data:params,
            success:function(res){
                if(res.code==1){
                    layer.msg(res.msg,{time:1000},function(){
                        // location.href= "{:url('lists')}";
                        // 关闭当前ifram
                        var index = parent.layer.getFrameIndex(window.name);  
                        parent.layer.close(index);
                        window.parent.location.reload(); 
                    })
                }else{
                    layer.msg(res.msg,{time:1500})
                }
            },error:function(){
                layer.msg('系统繁忙，请稍后再试');
            }
        })
    });

    $(".close_layer").click(function(){
        var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
        parent.layer.close(index);  // 关闭layer
    });
</script>
</body>
</html>
